function wpYTsendRequest(a){jQuery(".wp-youtube-live .spinner").show(),jQuery.ajax({method:"POST",url:wpYouTubeLive.ajaxUrl,data:a}).done(function(a){var b=JSON.parse(a);b.error?jQuery(".wp-youtube-live-error").append(b.error).show():b.live&&(jQuery(".wp-youtube-live").replaceWith(b.content).addClass("live"),jQuery(".wp-youtube-live-error").hide(),window.dispatchEvent(wpYTevent))}).always(function(){jQuery(".wp-youtube-live .spinner").hide()})}function wpYTcheckAgain(a){console.log("checking again..."),jQuery(".wp-youtube-live").hasClass("live")?(console.log("aborting check since video is live"),clearInterval(checkAgainTimer)):(console.log("sending request..."),wpYTsendRequest(a))}function wpYTonPlayerReady(a){a.target.playVideo()}function wpYTonPlayerStateChange(a){console.log(a.data),0==a.data&&(jQuery(".wp-youtube-live").removeClass("live").addClass("completed"),wpYTcheckAgain())}var wpYTdata=[{action:"load_youtube_live",isAjax:!0}],wpYTevent=document.createEvent("Event");if(wpYTevent.initEvent("wpYouTubeLiveStarted",!0,!0),"true"==wpYouTubeLive.auto_refresh)var checkAgainTimer=setInterval(function(){wpYTdata.requestType="refresh",wpYTcheckAgain(wpYTdata)},1e3*wpYouTubeLive.refreshInterval);jQuery(document).ready(function(){wpYTsendRequest(wpYTdata),jQuery("body").on("click","button#check-again",function(a){a.preventDefault(),wpYTdata.requestType="refresh",wpYTcheckAgain(wpYTdata)})});